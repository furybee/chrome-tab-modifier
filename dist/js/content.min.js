var Tab=function(e,t,n){var l,i,r,u,o=null,c=null,a=null,d=null,g=null,f=null,m=null;for(var h in n)if(-1!==e.indexOf(h)){o=h,c=n[h].title||null,a=n[h].icon||null,d=n[h].pinned||null,g=n[h]["protected"]||null,f=n[h].unique||null,m=n[h].url_matcher||null;break}return l=function(){if(null!==c&&(c=-1!==c.indexOf("{title}")?c.replace("{title}",t):c),null!==m)for(var n=e.match(m)||[],l=1;l<n.length;l++)c=c.replace("$"+l,n[l]||"")},l(),getMatch=function(){return o},i=function(){return c},r=function(){return a},u=function(){return d},getProtected=function(){return g},getUnique=function(){return f},{getMatch:getMatch,getTitle:i,getIcon:r,getPinned:u,getProtected:getProtected,getUnique:getUnique}},w=window;chrome.runtime.sendMessage({method:"getSettings"},function(e){var t=e.data;if(void 0!==t){var n=new Tab(location.href,document.title,JSON.parse(t.settings));if(null!==n.getTitle()&&(document.title=n.getTitle()),n.getPinned()===!0&&chrome.runtime.sendMessage({method:"setPinned",tabId:t.tab_id}),null!==n.getIcon()){var l,i,r;l=document.querySelectorAll('head link[rel*="icon"]'),Array.prototype.forEach.call(l,function(e){e.parentNode.removeChild(e)}),i="{default}"===n.getIcon()?chrome.extension.getURL("/img/default_favicon.png"):n.getIcon(),r=document.createElement("link"),r.type="image/x-icon",r.rel="icon",r.href=i,document.getElementsByTagName("head")[0].appendChild(r)}n.getProtected()===!0&&(w.onbeforeunload=function(){return""}),n.getUnique()===!0&&chrome.runtime.sendMessage({method:"setUnique",match:n.getMatch(),tabId:t.tab_id})}});